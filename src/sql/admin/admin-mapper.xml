<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<entry key="selectListCount">
		SELECT
		       COUNT(*) COUNT
		  FROM THEME
	</entry>
	
	<entry key="selectThemeList">
		SELECT *
		  FROM (
		        SELECT ROWNUM RNUM, A.*
		          FROM (
                        SELECT
                               THEME_NO
                             , THEME_TITLE
                             , THEME_TITLE_COLOR
                             , THEME_SUBTITLE
                             , ENR_DATE
                             , STATUS
                          FROM THEME
                         ORDER
                            BY ENR_DATE DESC
		               )A
		        )
		 WHERE RNUM BETWEEN ? AND ?
	</entry>

	<entry key="insertTheme">
		INSERT
		  INTO THEME
		  (
		    THEME_NO
		  , THEME_TITLE
		  , THEME_TITLE_COLOR
		  , THEME_SUBTITLE
		  , ENR_DATE
		  , STATUS
		  )
		VALUES
		  (
		    SEQ_THEME.NEXTVAL
		  , ?
		  , ?
		  , ?
		  , SYSDATE
		  , ?
		  )
	</entry>
	
	<entry key="selectThemeNo">
		SELECT
		       SEQ_THEME.CURRVAL AS THEME_NO
		  FROM DUAL
	</entry>
	
	<entry key="updateTheme">
		UPDATE
		       THEME
		   SET THEME_TITLE = ?
		     , THEME_TITLE_COLOR = ?
		     , THEME_SUBTITLE = ?
		     , STATUS = ?
		 WHERE THEME_NO = ?
	</entry>
	
	<entry key="selectTheme">
		SELECT
		       THEME_NO
		     , THEME_TITLE
		     , THEME_TITLE_COLOR
		     , THEME_SUBTITLE
		     , ENR_DATE
		     , STATUS
		  FROM THEME
		 WHERE THEME_NO = ?
	</entry>

	<entry key="selectBlackListNCount">
		SELECT COUNT(*) COUNT
		FROM MEMBER
		WHERE BLACK_YN LIKE 'N'
	</entry>
	<entry key="selectBlackListYCount">
		SELECT COUNT(*) COUNT
		FROM MEMBER
	</entry>
	<entry key="selectMemberListBlackN">
		SELECT *
		FROM(
    		SELECT ROWNUM RNUM, A.*
    		FROM(
        		SELECT
            		 MEM_NO,
                     MEM_EMAIL,
                     MEM_ID,
                     MEM_NAME,
                     BLACK_YN,
                     WARNING
        		FROM
            		MEMBER
    		WHERE
        		BLACK_YN LIKE 'N'
    		ORDER BY
        		BLACK_YN DESC, WARNING DESC, MEM_NO ASC) A
        		)
    		WHERE RNUM BETWEEN ? AND ?
	</entry>
	<entry key="selectMemberListBlackY">
		SELECT *
		FROM(
    		SELECT ROWNUM RNUM, A.*
    		FROM(
        		SELECT
            		 MEM_NO,
                     MEM_EMAIL,
                     MEM_ID,
                     MEM_NAME,
                     BLACK_YN,
                     WARNING
        		FROM
            		MEMBER
    		ORDER BY
        		BLACK_YN DESC, WARNING DESC, MEM_NO ASC) A
        		)
    		WHERE RNUM BETWEEN ? AND ?
	</entry>
	<entry key="updateMemberBlackY">
		UPDATE
			MEMBER
		SET BLACK_YN = 'Y'
		WHERE MEM_NO = ?
	</entry>
	
	<entry key="selectReportList">
		SELECT *
		FROM(
    		SELECT ROWNUM RNUM, A.*
    		FROM(
                 SELECT RPT.*, MB.MEM_ID AS "RMEM_ID"
                 FROM  (
                        SELECT
                               RPT_NO
                             , MEM_ID
                             , RMEM_NO
                             , CONTENT
                             , R.ENR_DATE
                             , DAILY_NO
                             , RPT_CATEGORY
                             , CM_NO
                          FROM REPORT R
                          JOIN MEMBER M ON (R.MEM_NO = M.MEM_NO)
                         WHERE R.STATUS = 'N'
                           AND BR_CATEGORY = ?
                      ORDER BY R.ENR_DATE DESC) RPT
                    JOIN MEMBER MB ON (RPT.RMEM_NO = MB.MEM_NO)
                ORDER BY RPT.ENR_DATE DESC) A
        		)
    		WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<entry key="deleteReport">
		UPDATE REPORT
		SET STATUS = 'Y'
		WHERE RPT_NO IN (?)
	</entry>
	
	<entry key="processReport">
		UPDATE MEMBER
		   SET WARNING = WARNING + 1
	  	 WHERE MEM_NO IN (SELECT RMEM_NO
		                    FROM REPORT
		                   WHERE RPT_NO IN(?))
	</entry>
	
	<entry key="selectReportListByMemId">
		SELECT RPT.*, MB.MEM_ID AS "RMEM_ID"
        FROM  (
                    SELECT
                           RPT_NO
                         , MEM_ID
                         , RMEM_NO
                         , CONTENT
                         , R.ENR_DATE
                         , DAILY_NO
                         , RPT_CATEGORY
                         , CM_NO
                      FROM REPORT R
                      JOIN MEMBER M ON (R.MEM_NO = M.MEM_NO)
                     WHERE R.STATUS = 'N'
                       AND BR_CATEGORY = ?
                  ORDER BY R.ENR_DATE DESC) RPT
        JOIN MEMBER MB ON (RPT.RMEM_NO = MB.MEM_NO)
        WHERE RPT.MEM_ID = ?
        ORDER BY RPT.ENR_DATE DESC
	</entry>
	
	<entry key="selectReportListByRmemId">
		SELECT RPT.*, MB.MEM_ID AS "RMEM_ID"
        FROM  (
                    SELECT
                           RPT_NO
                         , MEM_ID
                         , RMEM_NO
                         , CONTENT
                         , R.ENR_DATE
                         , DAILY_NO
                         , RPT_CATEGORY
                         , CM_NO
                      FROM REPORT R
                      JOIN MEMBER M ON (R.MEM_NO = M.MEM_NO)
                     WHERE R.STATUS = 'N'
                       AND BR_CATEGORY = ?
                  ORDER BY R.ENR_DATE DESC) RPT
        JOIN MEMBER MB ON (RPT.RMEM_NO = MB.MEM_NO)
        WHERE MB.MEM_ID = ?
        ORDER BY RPT.ENR_DATE DESC
	</entry>
	
	<entry key="selectReportListByRptCategory">
		SELECT RPT.*, MB.MEM_ID AS "RMEM_ID"
        FROM  (
                    SELECT
                           RPT_NO
                         , MEM_ID
                         , RMEM_NO
                         , CONTENT
                         , R.ENR_DATE
                         , DAILY_NO
                         , RPT_CATEGORY
                         , CM_NO
                      FROM REPORT R
                      JOIN MEMBER M ON (R.MEM_NO = M.MEM_NO)
                     WHERE R.STATUS = 'N'
                       AND BR_CATEGORY = ?
                  ORDER BY R.ENR_DATE DESC) RPT
        JOIN MEMBER MB ON (RPT.RMEM_NO = MB.MEM_NO)
        WHERE RPT_CATEGORY LIKE '%'||?||'%'
        ORDER BY RPT.ENR_DATE DESC
	</entry>
  
	<entry key="updateMemberBlackN">
	UPDATE
			MEMBER
		SET BLACK_YN = 'N'
		WHERE MEM_NO = ?
  </entry>

	<entry key="selectReportListCount">
		SELECT COUNT(*) COUNT
		FROM REPORT
		WHERE BR_CATEGORY = ?
          AND STATUS = 'N'
	</entry>
	
	<entry key="selectReportListCountByMemId">
               SELECT COUNT(*)
                FROM (
                       SELECT
                           RPT_NO
                         , M.MEM_ID
                         , RMEM_NO
                         , CONTENT
                         , R.ENR_DATE
                         , DAILY_NO
                         , RPT_CATEGORY
                         , CM_NO
                      FROM REPORT R
                      JOIN MEMBER M ON (R.MEM_NO = M.MEM_NO)
                     WHERE R.STATUS = 'N'
                       AND BR_CATEGORY = ?
                  ORDER BY R.ENR_DATE DESC) RPT
                  WHERE MEM_ID = ?
	</entry>
	
	<entry key="selectReportListCountByRmemId">
               SELECT COUNT(*)
                FROM (
                       SELECT
                           RPT_NO
                         , M.MEM_ID
                         , RMEM_NO
                         , CONTENT
                         , R.ENR_DATE
                         , DAILY_NO
                         , RPT_CATEGORY
                         , CM_NO
                      FROM REPORT R
                      JOIN MEMBER M ON (R.RMEM_NO = M.MEM_NO)
                     WHERE R.STATUS = 'N'
                       AND BR_CATEGORY = ?
                  ORDER BY R.ENR_DATE DESC) RPT
                  WHERE MEM_ID = ?
	</entry>
	
	<entry key="selectReportListCountByRptCategory">
		SELECT COUNT(*) COUNT
		FROM REPORT
		WHERE BR_CATEGORY = ?
          AND STATUS = 'N'
		  AND RPT_CATEGORY LIKE '%'||?||'%'
	</entry>
	
	<entry key="selectListCountByMemberId">
		SELECT COUNT(*) COUNT
		FROM MEMBER
		WHERE MEM_ID LIKE '%'||?||'%'
	</entry>
	<entry key="selectListCountByEmail">
		SELECT COUNT(*) COUNT
		FROM MEMBER
		WHERE MEM_EMAIL LIKE '%'||?||'%'
	</entry>
	<entry key="selectListCountByMemName">
		SELECT COUNT(*) COUNT
		FROM MEMBER
		WHERE MEM_NAME LIKE '%'||?||'%'
	</entry>
	<entry key="selectListByMemberId">
		SELECT *
		FROM(
    		SELECT ROWNUM RNUM, A.*
    		FROM(
        		SELECT
            		 MEM_NO,
                     MEM_EMAIL,
                     MEM_ID,
                     MEM_NAME,
                     BLACK_YN,
                     WARNING
        		FROM
            		MEMBER
                WHERE MEM_ID LIKE '%'||?||'%'
    		ORDER BY
        		BLACK_YN DESC, WARNING DESC, MEM_NO ASC) A
        		)
    		WHERE RNUM BETWEEN ? AND ?
	</entry>
	<entry key="selectListByEmail">
		SELECT *
		FROM(
    		SELECT ROWNUM RNUM, A.*
    		FROM(
        		SELECT
            		 MEM_NO,
                     MEM_EMAIL,
                     MEM_ID,
                     MEM_NAME,
                     BLACK_YN,
                     WARNING
        		FROM
            		MEMBER
                WHERE MEM_EMAIL LIKE '%'||?||'%'
    		ORDER BY
        		BLACK_YN DESC, WARNING DESC, MEM_NO ASC) A
        		)
    		WHERE RNUM BETWEEN ? AND ?
	</entry>
	<entry key="selectListByMemName">
		SELECT *
		FROM(
    		SELECT ROWNUM RNUM, A.*
    		FROM(
        		SELECT
            		 MEM_NO,
                     MEM_EMAIL,
                     MEM_ID,
                     MEM_NAME,
                     BLACK_YN,
                     WARNING
        		FROM
            		MEMBER
                WHERE MEM_NAME LIKE '%'||?||'%'
    		ORDER BY
        		BLACK_YN DESC, WARNING DESC, MEM_NO ASC) A
        		)
    		WHERE RNUM BETWEEN ? AND ?
	</entry>
</properties>